<h1> Update Apigee Edge 4.16.09 to 4.17.05 </h1>
<p style="text-align: right;"><em>Edge for Private Cloud v. 4.17.05</em></p>
<h2>Which Edge versions can you update to 4.17.05</h2>
<p>You can update Apigee Edge version 4.16.09.0x to 4.17.05 using this procedure.</p>
<div class="note">
	<p>If you are updating from 4.17.01.0x, see <a href="http://docs.apigee.com/node/25171">http://docs.apigee.com/node/25171</a>.</p>
	<p>If you are updating from 4.16.01.0x or 4.16.05.0x, see <a href="http://docs.apigee.com/node/25166">http://docs.apigee.com/node/25166</a>.</p>
</div>
<p>If you have a version of Edge previous to version 4.16.01, then you must first migrate to version 4.16.01.x and then update to version 4.17.05.</p>
<h2>Who can perform the update</h2>
<p>The user running the update should be the same as the user who originally installed Edge, or a user running as root.</p>
<p>After you install the Edge RPMs, any user can configure them.</p>
<h2>Required upgrade to Qpid&nbsp;1.35</h2>
<p>This release contains a required update to Qpid 1.35. As part of updating a Qpid node, you have to:</p>
<ul>
	<li>Temporarily prevent Routers and Message Processors from writing to the Qpid node by blocking port 5672 on the Qpid node. You can use the following command to block this port on the Qpid node:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Wait for the Qpid queue to empty of messages to ensure that the Qpid node has processed all messages before the update. Use the following command to ensure that the Qpid message queue is empty:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; &nbsp;qpid-stat -q</span></li>
	<li>Update the Qpid node.</li>
	<li>Unblock port 5672 on the Qpid node to allows access from Routers and Message Processors. You can use the following command to unblock this port:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F </span>&nbsp; &nbsp;<br />
		<br />
		Note that if you are using iptables for other rules, you can use the -D option to reverse the specific change:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -D INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
</ul>
<p>This process is described in detail below for each Edge topology.</p>
<div class="note">
	<p>Most production installations of Edge use two Qpid nodes. When performing the Qpid update, you update each node one at a time. This process ensures that one Qpid node is available to handle messages from the Routers and Message Processors and no analytics data will be lost. However, if your installation of Edge contains a single Qpid node, some analytics data will be lost while the Qpid node is unavailable during the update.</p>
</div>
<h2>Required to enable EPEL repo</h2>
<p>You must enable&nbsp;<a href="https://fedoraproject.org/wiki/EPEL">Extra Packages for Enterprise Linux (or EPEL)</a>&nbsp;to install or update Edge. The command you use&nbsp;depends on your version of RedHat/CentOS:</p>
<ul>
	<li>For&nbsp;RedHat/CentOS 7.x:?<br />
		<span style="font-family:courier new,courier,monospace;">&gt;&nbsp;wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm; rpm -ivh epel-release-latest-7.noarch.rpm</span></li>
	<li>For RedHat/CentOS 6.x:<br />
		<span style="font-family:courier new,courier,monospace;">wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm; rpm -ivh epel-release-latest-6.noarch.rpm</span></li>
</ul>
<h2>Required addition of SMTMAILFROM configuration paramater</h2>
<p>Edge 4.17.05 added a new required parameter to the configuration file used when you enable an&nbsp;SMTP server. You must now set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span>&nbsp;in the configuration file when enabling the SMTP server. This parameter has the form:</p>
<pre>
SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</pre>
<h2>Required if updating when using external authentication</h2>
<p>You can integrate an external directory service into an existing Apigee Edge Private Cloud installation. This feature is designed to work with any directory service that supports LDAP, such as Active Directory, OpenLDAP, and others. An external LDAP solution allows system administrators to manage user credentials from a centralized directory management service, external to systems like Apigee Edge that use them.</p>
<p>See <a href="http://docs.apigee.com/node/22046">http://docs.apigee.com/node/22046</a> for more.</p>
<p>When external authentication is enabled, most customers use the Active Directory SAM account name field as the username for authentication, instead of an email address which is used by the Edge OpenLDAP server.&nbsp;</p>
<p>If you have integrated with&nbsp;an external directory service, then add the following line to your config file when updating Edge to 4.17.05:</p>
<pre>
IS_EXTERNAL_AUTH="true"</pre>
<p>This line configures Edge to support an account name, rather than an email address, as the username.&nbsp;</p>
<h2>Automatic propagation of property settings&nbsp;</h2>
<p>If you have set any properties by editing <span style="font-family:courier new,courier,monospace;">.properties</span> files in <span style="font-family:courier new,courier,monospace;">/opt/apigee/customer/application</span> then these values are retained by the update.</p>
<h2>Update prerequisites</h2>
<p>Take care of following prerequisites before upgrading Apigee Edge:</p>
<ul>
	<li><strong>Backup all nodes</strong><br />
		Before you update, it is recommended to perform a complete backup of all nodes for safety reasons. Use the procedure for your current version of Edge to perform the backup.&nbsp;<br />
		<br />
		This allows you to have a backup plan, in case the update to a new version doesn’t function properly. For more information on backup, see <a href="http://docs.apigee.com/node/20691">http://docs.apigee.com/node/20691</a>.</li>
	<li><strong>Ensure Edge is running</strong><br />
		Ensure that Edge is up and running during update process by using the command:<br />
		<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-all status</span></li>
</ul>
<h2>Handling a failed update</h2>
<p>In the case of an update failure, you can try to correct the issue, and then run update.sh again. You can run the update multiple times and it continues the update from where it last left off.</p>
<p>If the failure requires that you roll back the update to your previous version, see <a href="http://docs.apigee.com/node/23221">http://docs.apigee.com/node/23221</a> &nbsp;for more.&nbsp;</p>
<div class="note">
	<p>The Edge all-in-one and 2-node topologies are designed for a getting started and prototyping environments, not for production. Therefore, there is no rollback procedure for the all-in-one and 2-node topologies. In the situation where the update of these topologies fails, and retrying the update does not resolve the issue, the easiest option is to do a fresh install of 4.17.05.&nbsp;</p>
</div>
<h2>Logging update information</h2>
<p>By default, the <span style="font-family:courier new,courier,monospace;">update.sh</span> utility writes log information to:</p>
<pre>
/opt/apigee/var/log/apigee-setup/update.log</pre>
<p>If the user running the <span style="font-family:courier new,courier,monospace;">update.sh</span> utility does not have access to that directory, it writes the log to the <span style="font-family:courier new,courier,monospace;">/tmp</span> directory as a file named <span style="font-family:courier new,courier,monospace;">update_username.log</span>.</p>
<p>If the user does not have access to <span style="font-family:courier new,courier,monospace;">/tmp</span>, the <span style="font-family:courier new,courier,monospace;">update.sh</span> utility fails.</p>
<h2>Zero-downtime update</h2>
<p>A zero-downtime update, or rolling update, lets you update your Edge installation without bringing down Edge.&nbsp;</p>
<p>Zero-downtime update is only possible with a 5-node configuration and larger.&nbsp;</p>
<p>The key to zero-downtime upgrading is to remove each Router, one at a time, from the load balancer. You then update the Router and any other components on the same machine as the Router, and then add the Router back to the load balancer.</p>
<ol>
	<li>Update the machines in the correct order for your installation as described below in "Order of machine update".</li>
	<li>When it is time to update the Routers, select any one Router and make it unreachable, as described in <a href="http://docs.apigee.com/node/20371">http://docs.apigee.com/node/20371</a>.</li>
	<li>Update the selected Router and all other Edge components on the same machine as the Router. All Edge configurations show a Router and Message Processor on the same node.&nbsp;</li>
	<li>Make the Router reachable again.</li>
	<li>Repeat steps 2 through 4 for the remaining Routers.</li>
	<li>Continue the update for any remaining machines in your installation.</li>
</ol>
<p>Take care of the following before/after update:</p>
<ul>
	<li>On combined Router and Message Processor node:
		<ul>
			<li>Before update – perform the following:
				<ol>
					<li>Make the Router unreachable.</li>
					<li>Make the Message Processor unreachable.</li>
				</ol>
			</li>
			<li>After update - perform the following:
				<ol>
					<li>Make the Message Processor reachable.</li>
					<li>Make the Router reachable.</li>
				</ol>
			</li>
		</ul>
	</li>
	<li>On single Router node:
		<ul>
			<li>Before update, make the Router unreachable.</li>
			<li>After update, make the Router reachable.</li>
		</ul>
	</li>
	<li>On single Message Processor node:
		<ul>
			<li>Before update, make the Message Processor unreachable.</li>
			<li>After update, make the Message Processor reachable.</li>
		</ul>
	</li>
</ul>
<h2>Using a silent configuration file</h2>
<p>You must pass a silent configuration file to the update command. The silent configuration file should be the same one you used to install Edge 4.16.09.</p>
<h2>Procedure for updating to 4.17.05 on a node with an external internet connection</h2>
<p>Use the following procedure to update the Edge components on a node:&nbsp;</p>
<ol>
	<li>If present, disable any CRON jobs configured to perform a repair operation on Cassandra until after the update completes.&nbsp;</li>
	<li>Log in to your node as root to install the Edge RPMs.<br />
		<strong>Note</strong>: While RPM installation requires root access, you can perform Edge configuration without root access.</li>
	<li>Disable SELinux as described in <a href="http://docs.apigee.com/node/19896">http://docs.apigee.com/node/19896</a>.</li>
	<li>Download the Edge 4.17.05&nbsp;<span style="font-family:courier new,courier,monospace;">bootstrap_4.17.05.sh</span> file to <span style="font-family:courier new,courier,monospace;">/tmp/bootstrap_4.17.05.sh</span>:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; curl https://software.apigee.com/bootstrap_4.17.05.sh -o /tmp/bootstrap_<span style="background-color:#004;color:#fff;">4.17.05</span>.sh</span></li>
	<li>Install the Edge 4.17.05&nbsp;<span style="font-family:courier new,courier,monospace;">apigee-service</span> utility and dependencies:&nbsp;<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo bash /tmp/bootstrap_4.17.05.sh apigeeuser=<em><strong>uName</strong></em> apigeepassword=<em><strong>pWord</strong></em>&nbsp;</span><br />
		<br />
		where <em><strong>uName:pWord</strong></em> are the username and password you received from Apigee. If you omit <em><strong>pWord</strong></em>, you will be prompted to enter it.<br />
		<br />
		By default, the installer checks to see that you have Java 1.8 installed. If you do not, it installs it for you. Use the <span style="font-family:courier new,courier,monospace;">JAVA_FIX</span> option to specify how to handle Java installation. <span style="font-family:courier new,courier,monospace;">JAVA_FIX</span> takes the following values:<br />
		<br />
		I = Install OpenJDK 1.8 (default)<br />
		C = Continue without installing Java<br />
		Q = Quit. For this option, you have to install Java yourself.</li>
	<li>Use <span style="font-family:courier new,courier,monospace;">apigee-service</span> to update the <span style="font-family:courier new,courier,monospace;">apigee-setup</span> utility:?<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-setup update</span></li>
	<li>Update the <span style="font-family:courier new,courier,monospace;">apigee-validate</span> utility on the Management Server:?<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-validate update</span></li>
	<li>Update the <span style="font-family:courier new,courier,monospace;">apigee-provision</span> utility:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-provision update</span></li>
	<li>Run the update utility on your nodes in the order described below in "<em>Order of machine update</em>" below:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c <em><strong>component</strong></em> -f <em><strong>configFile</strong></em></span><br />
		<br />
		The only requirement on the config file is that the configuration file must be accessible or readable by the "apigee" user.&nbsp;<br />
		<br />
		Use the “-c” option to specify the component to update. The list of possible components includes:<br />
		<span style="font-family:courier new,courier,monospace;">ldap</span> = OpenLDAP<br />
		<span style="font-family:courier new,courier,monospace;">cs</span> = Cassandra<br />
		<span style="font-family:courier new,courier,monospace;">zk</span> = Zookeeper<br />
		<span style="font-family:courier new,courier,monospace;">qpid</span> = qpidd<br />
		<span style="font-family:courier new,courier,monospace;">ps</span> = postgresql<br />
		<span style="font-family:courier new,courier,monospace;">edge</span> =All Edge components except Edge UI: Management Server, Message Processor, Router, QPID Server, Postgres Server<br />
		<span style="font-family:courier new,courier,monospace;">ui</span> = Edge UI<br />
		<span style="font-family:courier new,courier,monospace;">all</span> = update all components on machine (only use for an Edge aio installation profile or an API BaaS asa installation profile)<br />
		<span style="font-family:courier new,courier,monospace;">e</span> = ElasticSearch<br />
		<span style="font-family:courier new,courier,monospace;">b</span> = API BaaS Stack<br />
		<span style="font-family:courier new,courier,monospace;">p</span> = API BaaS Portal<br />
		<span style="font-family:courier new,courier,monospace;">ebp</span> = ElasticSearch, API BaaS Stack, and API BaaS Portal on the same node</li>
	<li>Test the update by running the apigee-validate utility on the Management Server, as described in <a href="http://docs.apigee.com/node/19906">http://docs.apigee.com/node/19906</a>.</li>
</ol>
<p>To later rollback the update, use the procedure described in <a href="http://docs.apigee.com/node/25176">http://docs.apigee.com/node/25176</a>. &nbsp;</p>
<h2>Procedure for updating to 4.17.05 from a local repo</h2>
<p>If your Edge nodes are behind a firewall, or in some other way are prohibited from accessing the Apigee repository over the Internet, then you can perform the update from a local repository, or mirror, &nbsp;of the Apigee repo.&nbsp;</p>
<p>After you create a local Edge repository, you have two options for updating Edge from the local repo:</p>
<ul>
	<li>Create a .tar file of the repo, copy the .tar file to a node, and then update Edge from the .tar file.</li>
	<li>Install a webserver on the node with the local repo so that other nodes can access it. Apigee provides the Nginx webserver for you to use, or you can use your own webserver.&nbsp;</li>
</ul>
<p>To update from a local 4.17.05 repo:</p>
<ol>
	<li>Create a local 4.17.05 repo as described in "Create a local Apigee repository" at <a href="http://docs.apigee.com/node/19896">http://docs.apigee.com/node/19896</a>.<br />
		<strong>Note</strong>: If you already have an existing 4.16.09 repo, you can add the 4.17.05 repo to it as described in "Update a local Apigee repository" at <a href="http://docs.apigee.com/node/19896">http://docs.apigee.com/node/19896</a>.</li>
	<li><strong>To install apigee-service from a .tar file</strong>:
		<ol style="list-style: lower-alpha outside">
			<li>On the node with the local repo, use the following command to package the local repo into a single .tar file named <span style="font-family:courier new,courier,monospace;">/opt/apigee/data/apigee-mirror/apigee-4.17.05.tar.gz</span>:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-mirror package</span></li>
			<li>Copy the .tar file to the node where you want to update Edge. For example, copy it to the <span style="font-family:courier new,courier,monospace;">/tmp</span> directory on the new node.</li>
			<li>On the new node, untar the file to the /tmp directory:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; tar -xzf apigee-4.17.05.tar.gz</span><br />
				<br />
				This command creates a new directory, named repos, in the directory containing the .tar file. For example /tmp/repos.</li>
			<li>Install the Edge apigee-service utility and dependencies from /tmp/repos:&nbsp;<br />
				<span style="font-family:courier new,courier,monospace;">&gt; sudo bash /tmp/repos/bootstrap_4.17.05.sh apigeeprotocol="file://" apigeerepobasepath=/tmp/repos</span><br />
				<br />
				Notice that you include the path to the repos directory in this command.</li>
		</ol>
	</li>
	<li><strong>To install apigee-service using the Nginx webserver:</strong>
		<ol style="list-style: lower-alpha outside">
			<li>Configure the Nginx web server as described in "Install from the repo using the Nginx webserver" at <a href="http://docs.apigee.com/node/19896">http://docs.apigee.com/node/19896</a>.</li>
			<li>On the remote node, download the Edge <span style="font-family:courier new,courier,monospace;">bootstrap_4.17.05.sh</span> file to /tmp/bootstrap_4.17.05.sh:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /usr/bin/curl http://<em><strong>uName:</strong></em><em><strong>pWord</strong></em>@<em><strong>remoteRepo</strong></em>:3939/bootstrap_4.17.05.sh -o /tmp/bootstrap_4.17.05.sh</span><br />
				<br />
				where <em><strong>uName:pWord</strong></em> are the username and password you set above for the repo, and <em><strong>remoteRepo</strong></em> is the IP address or DNS name of the repo node.&nbsp;</li>
			<li>On the remote node, install the Edge apigee-service utility and dependencies:&nbsp;<br />
				<span style="font-family:courier new,courier,monospace;">&gt; sudo bash /tmp/bootstrap_4.17.05.sh apigeerepohost=<em><strong>remoteRepo</strong></em>:3939 apigeeuser=<em><strong>uName</strong></em> apigeepassword=<em><strong>pWord</strong></em> apigeeprotocol=http://</span><br />
				<br />
				where <em><strong>uName:pWord</strong></em> are the repo username and password.</li>
		</ol>
	</li>
	<li>Use <span style="font-family:courier new,courier,monospace;">apigee-service</span> to update the apigee-setup utility:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-setup update&nbsp;</span></li>
	<li>Update the <span style="font-family:courier new,courier,monospace;">apigee-validate</span> utility on the Management Server.?<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-validate update</span></li>
	<li>Update the <span style="font-family:courier new,courier,monospace;">apigee-provision</span> utility:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-provision update</span></li>
	<li>Run the update utility on your nodes in the order described below in "Order of machine update" below:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c component -f <em><strong>configFile</strong></em></span><br />
		<br />
		The only requirement on the config file is that the configuration file must be accessible or readable by the "apigee" user.&nbsp;<br />
		<br />
		Use the “-c” option to specify the component to update. The list of possible components includes:<br />
		<span style="font-family:courier new,courier,monospace;">ldap</span> = OpenLDAP<br />
		<span style="font-family:courier new,courier,monospace;">cs</span> = Cassandra<br />
		<span style="font-family:courier new,courier,monospace;">zk</span> = Zookeeper<br />
		<span style="font-family:courier new,courier,monospace;">qpid</span> = qpidd<br />
		<span style="font-family:courier new,courier,monospace;">ps</span> = postgresql<br />
		<span style="font-family:courier new,courier,monospace;">edge</span> =All Edge components except Edge UI: Management Server, Message Processor, Router, QPID Server, Postgres Server<br />
		<span style="font-family:courier new,courier,monospace;">ui</span> = Edge UI<br />
		<span style="font-family:courier new,courier,monospace;">all</span> = update all components on machine (only use for an Edge aio installation profile or an API BaaS asa installation profile)<br />
		<span style="font-family:courier new,courier,monospace;">e</span> = ElasticSearch<br />
		<span style="font-family:courier new,courier,monospace;">b</span> = API BaaS Stack<br />
		<span style="font-family:courier new,courier,monospace;">p</span> = API BaaS Portal<br />
		<span style="font-family:courier new,courier,monospace;">ebp</span> = ElasticSearch, API BaaS Stack, and API BaaS Portal on the same node</li>
	<li>Test the update by running the apigee-validate utility on the Management Server, as described in <a href="http://docs.apigee.com/node/19906">http://docs.apigee.com/node/19906</a>.</li>
</ol>
<p>To later rollback the update, use the procedure described in <a href="http://docs.apigee.com/node/25176">http://docs.apigee.com/node/25176</a>. &nbsp;</p>
<h2>Order of machine update</h2>
<p>The order that you update the machines in an Edge installation is important. The most important considerations to an update are:</p>
<ul>
	<li>You must update <strong>all</strong> Cassandra and ZooKeeper nodes before you update any other nodes.</li>
	<li>For any machine with multiple Edge components (Management Server, Message Processor, Router, QPID Server but not Postgres Server), use the "-c edge" option to update them all at the same time.&nbsp;</li>
	<li>If a step specifies that it should be performed on multiple machines, perform it in the specified machine order.</li>
	<li>There is no separate step to update Monetization. It is updated when you specify the "-c edge" option.</li>
</ul>
<h3>For a 1-host standalone installation</h3>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f <em><strong>configFile</strong></em></span></li>
	<li>Set the following iptables rule:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Check the Qpid message queue:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
		<br />
		Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
	<li>Update <span style="font-family:courier new,courier,monospace;">qpidd</span>:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
	<li>Flush iptables:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
	<li>Update postgresql:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em></span></li>
	<li>Start postgresql:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></li>
	<li>Update LDAP:<br />
		<span style="font-family: &quot;courier new&quot;, courier, monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update the remaining Edge components:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update Edge UI:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 2-host standalone installation</h3>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f <em><strong>configFile</strong></em></span></li>
	<li>Set the following iptables rule on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Check the Qpid message queue&nbsp;on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
		<br />
		Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
	<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
	<li>Flush iptables&nbsp;on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
	<li>Update postgresql&nbsp;on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em></span></li>
	<li>Start postgresql&nbsp;on machine 2:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></li>
	<li>Update LDAP on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update Edge components on machine 2 and 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update UI on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 5-host clustered installation</h3>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper on machine 1, 2, and 3:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f <em><strong>configFile</strong></em></span></li>
	<li>Set the following iptables rule on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Check the Qpid message queue&nbsp;on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
		<br />
		Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
	<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
	<li>Flush iptables&nbsp;on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
	<li>Repeat steps 3 through 6 on machine 5.</li>
	<li>Update postgresql&nbsp;on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em></span></li>
	<li>Start postgresql&nbsp;on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></li>
	<li>Repeat steps 8 and 9 on machine 5.</li>
	<li>Update LDAP on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update Edge components on machine 4, 5, 1, 2, 3:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update UI on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 9-host clustered installation</h3>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper on machine 1, 2, and 3:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Set the following iptables rule on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Check the Qpid message queue&nbsp;on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
		<br />
		Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
	<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
	<li>Flush iptables&nbsp;on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
	<li>Repeat steps 3 through 6 on machine 7.</li>
	<li>Update postgresql&nbsp;on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em></span></li>
	<li>Start postgresql&nbsp;on machine 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></li>
	<li>Repeat steps 8 and 9 on machine 7.</li>
	<li>Update LDAP on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update Edge components on machine 6, 7, 8, 9, 1, 4, and 5 in that order:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update UI on machine 1:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 13-host clustered installation</h3>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper on machine 1, 2, and 3:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Set the following iptables rule on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
	<li>Check the Qpid message queue&nbsp;on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
		<br />
		Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
	<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
	<li>Flush iptables&nbsp;on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
	<li>Repeat steps 3 through 6 on machine 13.</li>
	<li>Update postgresql&nbsp;on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em></span></li>
	<li>Start postgresql&nbsp;on machine 12:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></li>
	<li>Repeat steps 8 and 9 on machine 13.</li>
	<li>Update LDAP on machine 4 and 5:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update Edge components on machine 12, 13, 8, 9, 6, 7, 10, and 11 in that order:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update UI on machine 6 and 7:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 12-host clustered installation</h3>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Set <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> in your configuration file if you have enabled SMTP on Edge. This parameter has the form:<br />
		<span style="font-family:courier new,courier,monospace;">SMTPMAILFROM="My Company &lt;myco@company.com&gt;"</span></li>
	<li>Update Cassandra and ZooKeeper:
		<ol style="list-style: lower-alpha outside">
			<li>On machines 1, 2 and 3 in Data Center 1:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
			<li>On machines 7, 8, and 9 in Data Center 2<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs,zk -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
		</ol>
	</li>
	<li>Update qpidd:
		<ol style="list-style: lower-alpha outside">
			<li>Machines 4, 5 in Data Center 1
				<ol>
					<li>Set the following iptables rule on machine 4:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
					<li>Check the Qpid message queue&nbsp;on machine 4:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
						<br />
						Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
					<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 4:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
					<li>Flush iptables&nbsp;on machine 4:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
					<li>Repeat steps 1 through 4 on machine 5.</li>
				</ol>
			</li>
			<li>Machines 10, 11 in Data Center 2
				<ol>
					<li>Set the following iptables rule on machine 10:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -A INPUT -p tcp --destination-port 5672 ! -s `hostname` &nbsp;-i eth0 -j DROP</span></li>
					<li>Check the Qpid message queue&nbsp;on machine 10:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; qpid-stat -q</span>&nbsp;<br />
						<br />
						Continue to check the queue until the count in the "msg" column is 0. You cannot upgrade Qpid until it has processed all messages. &nbsp;</li>
					<li>Update <span style="font-family:courier new,courier,monospace;">qpidd&nbsp;</span>on machine 10:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c qpid -f <em><strong>configFile</strong></em></span></li>
					<li>Flush iptables&nbsp;on machine 10:<br />
						<span style="font-family:courier new,courier,monospace;">&gt; sudo iptables -F</span></li>
					<li>Repeat steps 1 through 4 on machine 11.</li>
				</ol>
			</li>
		</ol>
	</li>
	<li>
		<div>Update postgresql:</div>
		<ol style="list-style: lower-alpha outside">
			<li>
				<div>Machines 6 in Data Center 1<br />
					<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <em><strong>configFile</strong></em><br />
					&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></div>
			</li>
			<li>
				<div>Machines 12 in Data Center 2<br />
					<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ps -f <strong>configFile</strong><br />
					&gt; /opt/apigee/apigee-service/bin/apigee-service apigee-postgresql start</span></div>
			</li>
		</ol>
	</li>
	<li>Update LDAP:
		<ol style="list-style: lower-alpha outside">
			<li>Machines 1 in Data Center 1<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
			<li>Machines 7 in Data Center 2<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ldap -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
		</ol>
	</li>
	<li>Update Edge components:
		<ol style="list-style: lower-alpha outside">
			<li>Machines 4, 5, 6, 1, 2, 3 in Data Center 1<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
			<li>Machines 10, 11, 12, 7, 8, 9 in Data Center 2<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c edge -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
		</ol>
	</li>
	<li>Update UI:
		<ol style="list-style: lower-alpha outside">
			<li>Machine 1 in Data Center 1:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
			<li>Machine 7 in Data Center 2:<br />
				<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c ui -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
		</ol>
	</li>
</ol>
<h3>For a 7-host API BaaS installation</h3>
<div class="note">
	<p>BaaS does not support the <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> paramater so you do not have to add it to the configuration file.</p>
</div>
<p>You must add two new properties to the config&nbsp;file before you run the upgrade procedure:</p>
<pre>
# For a single data center, specify the same value as BAAS_CASS_LOCALDC.
BAAS_CASS_DC_LIST="dc-1"

# Defines the initial contact points for members of the BaaS cluster. 
# Specify the IP address of no more than two Stack nodes. 
BAAS_CLUSTER_SEEDS="dc-1:$IP4,dc-1:$IP5"</pre>
<p>For a complete config file example, see <a href="http://docs.apigee.com/node/19931">http://docs.apigee.com/node/19931</a>.</p>
<p>You also must ensure that port 2551 is open on all Stack nodes for access from all other Stack nodes.</p>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Update Cassandra on machine 5, 6, and 7:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>
		<p>Update ElasticSearch and API BaaS Stack on machine 1, 2, and 3:<br />
			<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c e,b -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></p>
	</li>
	<li>Update API BaaS Portal on machine 4:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c p -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a 10-host API BaaS installation</h3>
<div class="note">
	<p>BaaS does not support the <span style="font-family:courier new,courier,monospace;">SMTPMAILFROM</span> paramater so you do not have to add it to the configuration file.</p>
</div>
<p>You must add two new properties to the&nbsp;config&nbsp;file before you run the upgrade procedure:</p>
<pre>
# For a single data center, specify the same value as BAAS_CASS_LOCALDC.
BAAS_CASS_DC_LIST="dc-1"

# Defines the initial contact points for members of the BaaS cluster. 
# Specify the IP address of no more than two Stack nodes. 
BAAS_CLUSTER_SEEDS="dc-1:$IP4,dc-1:$IP5"</pre>
<p>For a complete config file example, see <a href="http://docs.apigee.com/node/19931">http://docs.apigee.com/node/19931</a>.</p>
<p>You also must ensure that port 2551 is open on all Stack nodes for access from all other Stack nodes.</p>
<p>See <a href="http://docs.apigee.com/node/19876">http://docs.apigee.com/node/19876</a> for the list of Edge topologies and node numbers.</p>
<ol>
	<li>Update Cassandra on machine 8, 9, and 10:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c cs -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update ElasticSearch on machine 1, 2, and 3:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c e -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update API BaaS Stack on machine 4, 5, and 6:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c b -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
	<li>Update API BaaS Portal on machine 7:<br />
		<span style="font-family:courier new,courier,monospace;">&gt; /opt/apigee/apigee-setup/bin/update.sh -c p -f&nbsp;</span><em style="font-family: &quot;courier new&quot;, courier, monospace;"><strong>configFile</strong></em></li>
</ol>
<h3>For a non-standard installation</h3>
<p>If you have a non-standard installation, then update Edge components in the following order:</p>
<ol>
	<li>ZooKeeper</li>
	<li>Cassandra</li>
	<li>qpidd, ps</li>
	<li>LDAP</li>
	<li>Edge, meaning the "-c edge" profile on all nodes in the order: nodes with Qpid server, Postgres server, Management Server, Message Processor, and Router.&nbsp;<br />
		<strong>Note</strong>: If the node has both Qpid server and Postgres server installed, run the "-c edge" profile step.</li>
	<li>Edge UI</li>
</ol>
<div>&nbsp;</div>
