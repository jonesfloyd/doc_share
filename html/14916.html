<h1> GetOAuthV1Info policy </h1>
<p>[toc]</p>
<p><img src="sites/docs/files/icon_policy_security.jpg" /></p>
<h3>What</h3>
<p>Gets attributes of tokens and keys and populates flow variables with the values of those attributes. This policy type can be useful when you need to configure dynamic, conditional behavior based on a value in a token or key. Whenever token validation occurs, variables are automatically populated with the values of token attributes. However, in cases where token validation has not occured, you can use this feature to explicity populate variables with these attribute values. &nbsp;See also <a href="http://docs.apigee.com/node/212">http://docs.apigee.com/node/212</a>.</p>
<h3>Where</h3>
<p>This policy can be attached in the following locations. See the Samples section below&nbsp;for specific attachment guidance in different situations.</p>
<table cellspacing="0" style="margin:20px 20px 20px 0px" width="650">
	<tbody>
		<tr bgcolor="#e5e5e5" style="font-size:13px; line-height:20px" valign="middle">
			<td class="bbdbrd" colspan="5" style="text-align: center">ProxyEndpoint</td>
			<td class="bbd" colspan="5" style="text-align: center">TargetEndpoint</td>
		</tr>
		<tr bgcolor="#f4f4f4" style="font-size:12px; line-height:20px" valign="middle">
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td style="text-align: center">PreFlow</td>
			<td style="text-align: center">Flow</td>
			<td class="brl" style="text-align: center">PostFlow</td>
			<td style="text-align: center">PreFlow</td>
			<td style="text-align: center">Flow</td>
			<td style="text-align: center">PostFlow</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr style="font-size:36px; line-height:24px" valign="middle">
			<td class="bbl" style="text-align: right; font-size:13px; font-style:italic">Request</td>
			<td class="bbl" style="text-align:center; font-size:16px">→</td>
			<!-- Start request dots. Option+8 for dot. Third dot is bblbrl class. -->
			<td class="bbl" style="text-align: center; color: #7DD31F">•</td>
			<td class="bbl" style="text-align: center; color: #7DD31F">•</td>
			<td class="bblbrl" style="text-align: center; color: #7DD31F">•</td>
			<td class="bbl" style="text-align: center; color: #7DD31F">•</td>
			<td class="bbl" style="text-align: center; color: #7DD31F">•</td>
			<td class="bbl" style="text-align: center; color: #7DD31F">•</td>
			<!-- End request dots -->
			<td class="bbl">&nbsp;</td>
			<td class="bbl">&nbsp;</td>
		</tr>
		<tr style="font-size:36px; line-height:24px" valign="middle">
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<!-- Start response dots. Option+8 for dot. Third dot is brl class. -->
			<td style="text-align: center; color: #7DD31F">•</td>
			<td style="text-align: center; color: #7DD31F">•</td>
			<td class="brl" style="text-align: center; color: #7DD31F">•</td>
			<td style="text-align: center; color: #7DD31F;">•</td>
			<td style="text-align: center; color: #7DD31F;">•</td>
			<td style="text-align: center; color: #7DD31F;">•</td>
			<!-- End response dots -->
			<td style="text-align:center; font-size:16px">←</td>
			<td style="text-align: left; font-size:13px; font-style:italic">Response</td>
		</tr>
		<tr bgcolor="#f4f4f4" style="font-size:12px; line-height:20px" valign="middle">
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td style="text-align: center">PostFlow</td>
			<td style="text-align: center">Flow</td>
			<td class="brl" style="text-align: center">PreFlow</td>
			<td style="text-align: center">PostFlow</td>
			<td style="text-align: center">Flow</td>
			<td style="text-align: center">PreFlow</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</tbody>
</table>
<h2 id="elementreference2">Element Reference</h2>
<p>The element reference describes the elements and attributes of the GetOAuthV1Info policy.</p>
<pre>
&lt;GetOAuthV1Info async="false" continueOnError="false" enabled="true" name="Get-OAuth-v10a-Info-1"&gt;
    &lt;DisplayName&gt;Get OAuth v1.0a Info-1&lt;/DisplayName&gt;
    &lt;ConsumerKey ref="{flow.variable}"&gt;{value}&lt;/ConsumerKey&gt;
    &lt;RequestToken ref="{flow.variable}"&gt;{request token}&lt;/RequestToken&gt;
    &lt;AccessToken ref="{flow.variable}"&gt;{access token}&lt;/AccessToken&gt;
    &lt;OAuthConfig ref="{flow.variable}"&gt;{config}&lt;/OAuthConfig&gt;
&lt;/GetOAuthV1Info&gt;
</pre>
<h2>&lt;GetOAuthV1Info&gt; attributes</h2>
<pre class="prettyprint prettyprinted" style="margin-top: 0px; margin-bottom: 18px; padding: 2px; font-family: Courier, monospace; font-size: 12.727272033691406px; color: rgb(72, 72, 72); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; line-height: 19.5px; border: 1px solid rgb(136, 136, 136); white-space: pre-wrap; word-break: normal; word-wrap: break-word; max-width: 700px; background-color: rgb(253, 246, 227);">
&lt;GetOAuthV1Info async="false" continueOnError="false" enabled="true" name="Get-OAuth-v10a-Info-1"&gt;</pre>
<a href="http://docs.apigee.com/node/18471">Content to be inserted here</a>
<h2>&lt;AccessToken&gt; element</h2>
<p>Verifies the access tokenh and retrieves all the attributes.&nbsp;The resource has to be set in the flow in the variable <code>flow.resource.name</code> . On success, the attributes are available as flow variables.You pass in a either a variable that contains the access token string or a literal token string (rare case). In this example, the access token is retrieved from a query parameter passed in a request.</p>
<pre>
&lt;AccessToken ref="request.queryparam.access_token"&gt;&lt;/AccessToken&gt;</pre>
<table class="table">
	<tbody>
		<tr>
			<td style="width: 120px;" width="150">
				<p><strong>Default:</strong></p>
			</td>
			<td width="223">
				<p><code>request.formparam.access_token</code> (<code>x-www-form-urlencoded</code> and specified in the request body)</p>
			</td>
		</tr>
		<tr>
			<td>
				<p><strong>Presence:</strong></p>
			</td>
			<td>
				<p>Optional</p>
			</td>
		</tr>
		<tr>
			<td><strong>Type:</strong></td>
			<td>String</td>
		</tr>
		<tr>
			<td><strong>Valid values:</strong></td>
			<td>
				<p>Either a flow variable containing an access token string, or a literal string.</p>
			</td>
		</tr>
	</tbody>
</table>
<h2>&lt;ConsumerKey&gt; element</h2>
<p>Retrieves the profile for a consumer key. You pass in a either a variable that contains the access token string or a literal token string (rare case). In this example, the access token is retrieved from a query parameter passed in a request.</p>
<pre>
&lt;ConsumerKey ref="request.queryparam.consumer_key"&gt;&lt;/ConsumerKey&gt;</pre>
<table class="table">
	<tbody>
		<tr>
			<td style="width: 120px;" width="150">
				<p><strong>Default:</strong></p>
			</td>
			<td width="223">
				<p><code>request.formparam.consumer_key</code> (<code>x-www-form-urlencoded</code> and specified in the request body)</p>
			</td>
		</tr>
		<tr>
			<td>
				<p><strong>Presence:</strong></p>
			</td>
			<td>
				<p>Optional</p>
			</td>
		</tr>
		<tr>
			<td><strong>Type:</strong></td>
			<td>String</td>
		</tr>
		<tr>
			<td><strong>Valid values:</strong></td>
			<td>
				<p>Either a flow variable containing an access token string, or a literal string.</p>
			</td>
		</tr>
	</tbody>
</table>
<h2>&lt;OAuthConfig&gt; element</h2>
<p>Verifies the OAuth config information.</p>
<pre>
&lt;OAuthConfig ref="request.queryparam.oauth_config"&gt;&lt;/OAuthConfig&gt;</pre>
<table class="table">
	<tbody>
		<tr>
			<td style="width: 120px;" width="150">
				<p><strong>Default:</strong></p>
			</td>
			<td width="223">
				<p><code>request.formparam.access_token</code> (<code>x-www-form-urlencoded</code> and specified in the request body)</p>
			</td>
		</tr>
		<tr>
			<td>
				<p><strong>Presence:</strong></p>
			</td>
			<td>
				<p>Optional</p>
			</td>
		</tr>
		<tr>
			<td><strong>Type:</strong></td>
			<td>String</td>
		</tr>
		<tr>
			<td><strong>Valid values:</strong></td>
			<td>
				<p>Either a flow variable containing an access token string, or a literal string.</p>
			</td>
		</tr>
	</tbody>
</table>
<p>&nbsp;</p>
<h2>&lt;RequestToken&gt; element</h2>
<p>Retrieves the profile for an request token. You pass in a either a variable that contains the access token string or a literal token string (rare case). In this example, the access token is retrieved from a query parameter passed in a request.</p>
<pre>
&lt;RequestToken ref="request.queryparam.request_token"&gt;&lt;/RequestToken&gt;</pre>
<table class="table">
	<tbody>
		<tr>
			<td style="width: 120px;" width="150">
				<p><strong>Default:</strong></p>
			</td>
			<td width="223">
				<p><code>request.formparam.request_token</code> (<code>x-www-form-urlencoded</code> and specified in the request body)</p>
			</td>
		</tr>
		<tr>
			<td>
				<p><strong>Presence:</strong></p>
			</td>
			<td>
				<p>Optional</p>
			</td>
		</tr>
		<tr>
			<td><strong>Type:</strong></td>
			<td>String</td>
		</tr>
		<tr>
			<td><strong>Valid values:</strong></td>
			<td>
				<p>Either a flow variable containing an access token string, or a literal string.</p>
			</td>
		</tr>
	</tbody>
</table>
<p>&nbsp;</p>
<h2 id="flowvariables2"><a id="flowvariables2" name="flowvariables"></a>Flow variables</h2>
<p>The GetOAuthV1Info policy populates these variables, and is typically used in cases where you need the profile data, but where a grant or validation has not occurred yet. .</p>
<h3>Consumer Key variables</h3>
<p>These variables are populated when the &lt;ConsumerKey&gt; operation executes:</p>
<pre>
oauthconsumer.{policy_name}.oauth_consumer_key
oauthconsumer.{policy_name}.oauth_consumer_key
oauthconsumer.{policy_name}.{app_attribute_name}
oauthconsumer.{policy_name}.{app_key_attribute_name}</pre>
<h3>Access token and request token variables</h3>
<p>These variables are populated when the &lt;AccessToken&gt; or &lt;RequestToken&gt; operation executes:</p>
<pre>
oauth_token
oauth_token_secret</pre>
<pre>
developer.app.name
developer.id</pre>
<pre>
apiproduct.name
apiproduct.&lt;custom_attribute_name&gt;</pre>
<h2>Policy-specific error codes</h2>
<p>See <a href="http://docs.apigee.com/node/4586">http://docs.apigee.com/node/4586</a>.</p>
<h2>Schema</h2>
<p>Each policy type is defined by an XML schema (<code>.xsd</code>). For reference, <a href="https://github.com/apigee/api-platform-samples/tree/master/schemas/policy">policy schemas</a> are available on GitHub.</p>
<h2>Error codes</h2>
<p><a href="http://docs.apigee.com/node/21366">Content to be inserted here</a></p>
<h2 id="relatedtopics2">Related topics</h2>
<ul>
	<li><a href="http://docs.apigee.com/node/212">http://docs.apigee.com/node/212</a></li>
</ul>
<p>&nbsp;</p>
